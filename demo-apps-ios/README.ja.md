# SecureNote iOS ã‚¢ãƒ—ãƒª

SwiftUI ã§å®Ÿè£…ã•ã‚ŒãŸ iOS ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚ãƒã‚¤ãƒ†ã‚£ãƒ–ãªãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¨ã€WebView ã‚’ä½¿ç”¨ã—ãŸ Web ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®çµ±åˆãƒ‡ãƒ¢ã§ã™ã€‚

> âš ï¸ **æ³¨æ„:** ã“ã®ãƒ‡ãƒ¢ã¯å‹•ä½œæ¤œè¨¼ãŒååˆ†ã§ã¯ãªãã€å®Ÿéš›ã«ãƒã‚°ãŒã‚ã‚Šã¾ã™ã€‚ä¸å…·åˆã‚’è¦‹ã¤ã‘ãŸã‚‰ã€DockMCPã‚’ä½¿ã£ã¦AIã«èª¿æŸ»ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ãã‚Œè‡ªä½“ãŒDockMCPã®å®Ÿè·µçš„ãªä½¿ã„æ–¹ã§ã™ã€‚
>
> ğŸ“ **ãƒ’ãƒ³ãƒˆ:** æ©Ÿèƒ½ã®èª¬æ˜ï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ãªã©ï¼‰ã«ã‚‚ãƒã‚°ãŒã‚ã‚Šã¾ã™ã€‚[demo-apps/README.ja.md](../demo-apps/README.ja.md) ã®Webç‰ˆã¨ã®é•ã„ã‚’ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SecureNote iOS App (SwiftUI)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ LoginView (ãƒã‚¤ãƒ†ã‚£ãƒ–)            â”‚   â”‚
â”‚  â”‚ - SwiftUI ãƒ•ã‚©ãƒ¼ãƒ                 â”‚   â”‚
â”‚  â”‚ - APIå‘¼ã³å‡ºã—                     â”‚   â”‚
â”‚  â”‚ - ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚ (ãƒˆãƒ¼ã‚¯ãƒ³)                  â”‚
â”‚            â†“                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ MainView (WebViewçµ±åˆ)          â”‚   â”‚
â”‚  â”‚ - WebViewContainer              â”‚   â”‚
â”‚  â”‚ - ãƒˆãƒ¼ã‚¯ãƒ³æ³¨å…¥                    â”‚   â”‚
â”‚  â”‚ - React Web ã‚¢ãƒ—ãƒªè¡¨ç¤º            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  API: http://api.securenote.test:8000  â”‚
â”‚  Web: http://securenote.test:8000      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ©Ÿèƒ½

### 1. ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ­ã‚°ã‚¤ãƒ³ (LoginView)

- **SwiftUI UI**: ãƒã‚¤ãƒ†ã‚£ãƒ–ãª iOS ãƒ‡ã‚¶ã‚¤ãƒ³
- **API é€£æº**: `/api/auth/login` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼è¡¨ç¤º
- **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹**: ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã® UI åå¿œ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹:**
```swift
POST http://api.securenote.test:8000/api/auth/login
Content-Type: application/json

{
  "email": "demo@example.com",
  "password": "demo123"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIs...",
  "user": {
    "id": "user123",
    "email": "demo@example.com",
    "name": "Demo User"
  }
}
```

### 2. WebView çµ±åˆ (WebViewContainer)

- **ãƒˆãƒ¼ã‚¯ãƒ³æ³¨å…¥**: JavaScript ã«èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ³¨å…¥
- **localStorage**: `localStorage.setItem('auth_token', token)`
- **React Web ã‚¢ãƒ—ãƒªçµ±åˆ**: `http://securenote.test:8000` ã‚’ãƒ­ãƒ¼ãƒ‰
- **è‡ªå‹•èªè¨¼**: Web ã‚¢ãƒ—ãƒªãŒ localStorage ã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³ã‚’èª­ã¿è¾¼ã¿

**ãƒˆãƒ¼ã‚¯ãƒ³æ³¨å…¥ã‚¹ã‚¯ãƒªãƒ—ãƒˆ:**
```javascript
window.authToken = 'eyJhbGciOiJIUzI1NiIs...';
localStorage.setItem('auth_token', 'eyJhbGciOiJIUzI1NiIs...');
```

### 3. èªè¨¼ç®¡ç† (AuthManager)

- **ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†**: ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã¨ãƒˆãƒ¼ã‚¯ãƒ³ä¿æŒ
- **API é€šä¿¡**: async/await ã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†
- **ã‚¨ãƒ©ãƒ¼ç®¡ç†**: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç®¡ç†ã¨è¡¨ç¤º

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- **macOS**: 11 ä»¥ä¸Š
- **Xcode**: 14 ä»¥ä¸Š
- **iOS**: 14 ä»¥ä¸Šã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: `demo-apps` ãŒå®Ÿè¡Œä¸­

### å®Ÿè¡Œæ–¹æ³•

#### 1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’èµ·å‹•

```bash
cd /workspace/demo-apps
docker-compose -f docker-compose.demo.yml up -d
```

**ç¢ºèª:**
- API ãŒ `http://api.securenote.test:8000/api` ã§å®Ÿè¡Œä¸­
- Web ãŒ `http://securenote.test:8000` ã§å®Ÿè¡Œä¸­

> **æ³¨æ„:** ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã¯ãƒ›ã‚¹ãƒˆOSã® `/etc/hosts` ã‚’å‚ç…§ã—ã¾ã™ã€‚ä¸€æ–¹ã€å®Ÿæ©Ÿã®å ´åˆã¯ãƒ›ã‚¹ãƒˆOSã®hostsè¨­å®šã‚’å‚ç…§ã§ããªã„ãŸã‚ã€Macä¸Šã«DNSã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹ç¯‰ã—ã¦å®Ÿæ©Ÿã®DNSå‚ç…§å…ˆã«æŒ‡å®šã™ã‚‹ã‹ã€ãƒ—ãƒ­ã‚­ã‚·ï¼ˆCharlesã‚„Proxymanç­‰ï¼‰ã‚’çµŒç”±ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

#### 2. Xcode ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã

```bash
cd /workspace/demo-apps-ios
open SecureNote.xcodeproj
```

#### 3. ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§å®Ÿè¡Œ

```
Cmd + R (ã¾ãŸã¯ Play ãƒœã‚¿ãƒ³)
```

#### 4. ãƒ­ã‚°ã‚¤ãƒ³

ãƒ‡ãƒ¢ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³:
- **Email**: `demo@example.com`
- **Password**: `demo123`

## é–‹ç™ºã‚¬ã‚¤ãƒ‰

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
SecureNote/
â”œâ”€â”€ App.swift                # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ AuthManager.swift        # èªè¨¼çŠ¶æ…‹ç®¡ç†
â”œâ”€â”€ LoginView.swift          # ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
â”œâ”€â”€ MainView.swift           # ãƒ¡ã‚¤ãƒ³ç”»é¢
â”œâ”€â”€ WebViewContainer.swift   # WebViewçµ±åˆ
â””â”€â”€ Info.plist              # ã‚¢ãƒ—ãƒªè¨­å®š
```

### ä¸»è¦ãªã‚¯ãƒ©ã‚¹

#### AuthManager
```swift
@Observable
class AuthManager {
    var isLoggedIn: Bool
    var authToken: String

    func login(email: String, password: String) async
    func logout()
}
```

#### WebViewContainer
```swift
struct WebViewContainer: View {
    let authToken: String
    // ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ³¨å…¥ã—ã¦ React Web ã‚¢ãƒ—ãƒªã‚’ãƒ­ãƒ¼ãƒ‰
}
```

### UIãƒ•ãƒ­ãƒ¼

```
App.swift
â”œâ”€ isLoggedIn = false
â”‚  â””â”€ LoginView
â”‚     â””â”€ submit email/password
â”‚        â””â”€ AuthManager.login()
â”‚           â””â”€ API POST /api/auth/login
â”‚              â”œâ”€ success
â”‚              â”‚  â””â”€ isLoggedIn = true
â”‚              â”‚     â””â”€ ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜
â”‚              â””â”€ error
â”‚                 â””â”€ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
â”‚
â””â”€ isLoggedIn = true
   â””â”€ MainView
      â””â”€ WebViewContainer(token: authToken)
         â””â”€ ãƒˆãƒ¼ã‚¯ãƒ³æ³¨å…¥
            â””â”€ http://securenote.test:8000 ãƒ­ãƒ¼ãƒ‰
               â””â”€ React Web ã‚¢ãƒ—ãƒª
```

## API é€£æº

### ãƒ­ã‚°ã‚¤ãƒ³ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

- **URL**: `http://api.securenote.test:8000/api/auth/login`
- **ãƒ¡ã‚½ãƒƒãƒ‰**: `POST`
- **Content-Type**: `application/json`

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
```json
{
  "email": "string",
  "password": "string"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ (200 OK):**
```json
{
  "token": "string",
  "user": {
    "id": "string",
    "email": "string",
    "name": "string"
  }
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ (4xx, 5xx):**
```json
{
  "message": "string"
}
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. API ã«æ¥ç¶šã§ããªã„

**å•é¡Œ**: `Connection refused` ã‚¨ãƒ©ãƒ¼

**è§£æ±º:**
```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒå®Ÿè¡Œä¸­ã‹ç¢ºèª
curl http://api.securenote.test:8000/api/health

# å®Ÿè¡Œã—ã¦ã„ãªã‘ã‚Œã°èµ·å‹•
cd /workspace/demo-apps
docker-compose -f docker-compose.demo.yml up -d
```

### 2. ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã«æ¥ç¶šã§ããªã„

**å•é¡Œ**: iOS ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

**è§£æ±º:** ãƒ›ã‚¹ãƒˆOSã® `/etc/hosts` ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚macOSå´ã® `/etc/hosts` ã‚„DNSè¨­å®šãŒã€ãã®ã¾ã¾ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿å†…ã«ã‚‚åæ˜ ã•ã‚Œã¾ã™ã€‚

### 3. WebView ãŒç©ºç™½

**å•é¡Œ**: React Web ã‚¢ãƒ—ãƒªãŒè¡¨ç¤ºã•ã‚Œãªã„

**è§£æ±º:**
- `http://securenote.test:8000` ã§ Web ãŒå®Ÿè¡Œä¸­ã‹ç¢ºèª
- ãƒ–ãƒ©ã‚¦ã‚¶ã§ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹: `open http://securenote.test:8000`
- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèª: Xcode â†’ Debug â†’ View Debugger

## ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–‹ç™º

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€è¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é€£æºé–‹ç™ºã‚’ç¤ºã—ã¦ã„ã¾ã™ï¼š

```
/workspace/
â”œâ”€â”€ demo-apps/        # API + React Web (Node.js)
â”‚   â”œâ”€â”€ securenote-api/
â”‚   â”œâ”€â”€ securenote-web/
â”‚   â””â”€â”€ docker-compose.demo.yml
â”‚
â””â”€â”€ demo-apps-ios/    # iOS App (Swift)
    â”œâ”€â”€ SecureNote/
    â””â”€â”€ SecureNote.xcodeproj
```

**AI ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ˆClaude Codeï¼‰ã®åˆ©ç‚¹:**

- âœ… ã™ã¹ã¦ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹
- âœ… API ã®ã‚¨ãƒ©ãƒ¼ã‚’ãƒ‡ãƒãƒƒã‚°
- âœ… Web ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ã®é€£æºã‚’ç¢ºèª
- âœ… ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å•é¡Œã‚’èª¿æŸ»

## å‚è€ƒãƒªãƒ³ã‚¯

- [SwiftUI ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developer.apple.com/documentation/swiftui/)
- [WebKit ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developer.apple.com/documentation/webkit/)
- [URLSession ã‚¬ã‚¤ãƒ‰](https://developer.apple.com/documentation/foundation/urlsession)

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License
