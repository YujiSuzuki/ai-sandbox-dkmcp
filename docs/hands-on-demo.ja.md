# ãƒãƒ³ã‚ºã‚ªãƒ³: ç§˜åŒ¿æƒ…å ±éš è”½ã‚’ä½“é¨“ã—ã¦ã¿ã‚ˆã†

[README ã«æˆ»ã‚‹](../README.ja.md#ãƒ‡ãƒ¢ã‚’è©¦ã™)

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ **2ã¤ã®éš è”½ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ** ã‚’ä½¿ã„åˆ†ã‘ã¦ã„ã¾ã™ï¼š

| æ–¹æ³• | åŠ¹æœ | ç”¨é€” |
|------|------|------|
| Docker ãƒã‚¦ãƒ³ãƒˆ | ãƒ•ã‚¡ã‚¤ãƒ«è‡ªä½“ãŒè¦‹ãˆãªã„ | `.env`ã€è¨¼æ˜æ›¸ãªã© |
| `.claude/settings.json` | Claude Code ãŒã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ | ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å†…ã®ç§˜åŒ¿æƒ…å ± |

---

## æ–¹æ³•1: Docker ãƒã‚¦ãƒ³ãƒˆã«ã‚ˆã‚‹éš è”½

ã“ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã¯ã€ç§˜åŒ¿è¨­å®šã® **æ­£å¸¸ãªçŠ¶æ…‹** ã¨ **è¨­å®šæ¼ã‚Œã®çŠ¶æ…‹** ã®ä¸¡æ–¹ã‚’ä½“é¨“ã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—1: æ­£å¸¸ãªçŠ¶æ…‹ã‚’ç¢ºèª

ã¾ãšã€ç¾åœ¨ã®è¨­å®šã§ç§˜åŒ¿ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ãéš è”½ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

```bash
# AI Sandbox å†…ã§å®Ÿè¡Œ
# iOS ã‚¢ãƒ—ãƒªã® Config ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç¢ºèªï¼ˆç©ºã«è¦‹ãˆã‚‹ï¼‰
ls -la demo-apps-ios/SecureNote/Config/

# Firebase è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªï¼ˆç©ºã¾ãŸã¯å­˜åœ¨ã—ãªã„ï¼‰
cat demo-apps-ios/SecureNote/GoogleService-Info.plist
```

ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒç©ºã€ã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ãŒç©ºã§ã‚ã‚Œã°ã€æ­£ã—ãéš è”½ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—2: è¨­å®šæ¼ã‚Œã‚’ä½“é¨“ã™ã‚‹

æ¬¡ã«ã€æ„å›³çš„ã«è¨­å®šã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã€è¨­å®šæ¼ã‚Œã®çŠ¶æ…‹ã‚’ä½“é¨“ã—ã¾ã™ã€‚

1. `.devcontainer/docker-compose.yml` ã‚’ç·¨é›†ã—ã€iOS é–¢é€£ã®ç§˜åŒ¿è¨­å®šã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼š

```yaml
    volumes:
      # ...
      # iOS ã‚¢ãƒ—ãƒªã® Firebase è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’éš è”½
      # Hide iOS app Firebase config file
      # - /dev/null:/workspace/demo-apps-ios/SecureNote/GoogleService-Info.plist:ro  # â† ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ

    tmpfs:
      # ...
      # iOS ã‚¢ãƒ—ãƒªã®è¨­å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç©ºã«ã™ã‚‹
      # Make iOS app config directory empty
      # - /workspace/demo-apps-ios/SecureNote/Config:ro  # â† ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
```

2. DevContainer ã‚’ãƒªãƒ“ãƒ«ãƒ‰ï¼š
   - VS Code: `Cmd+Shift+P` â†’ "Dev Containers: Rebuild Container"

### ã‚¹ãƒ†ãƒƒãƒ—3: èµ·å‹•æ™‚ã®è­¦å‘Šã‚’ç¢ºèª

ãƒªãƒ“ãƒ«ãƒ‰å¾Œã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ä»¥ä¸‹ã®ã‚ˆã†ãªè­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

**è­¦å‘Š1: DevContainer ã¨ CLI Sandbox ã®è¨­å®šå·®ç•°**
```
âš ï¸  ç§˜åŒ¿è¨­å®šã«å·®ç•°ãŒã‚ã‚Šã¾ã™

ä¸¡æ–¹ã® docker-compose.yml ã‚’åŒæœŸã—ã¦ãã ã•ã„:
  ğŸ“„ /workspace/.devcontainer/docker-compose.yml
  ğŸ“„ /workspace/cli_sandbox/docker-compose.yml
```

**è­¦å‘Š2: .claude/settings.json ã¨ã®åŒæœŸæ¼ã‚Œ**
```
âš ï¸  ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒ docker-compose.yml ã«æœªè¨­å®šã§ã™:

   ğŸ“„ demo-apps-ios/SecureNote/GoogleService-Info.plist

ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ .claude/settings.json ã§ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™ãŒã€
docker-compose.yml ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆã«è¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

å¯¾å‡¦æ–¹æ³•:
  æ‰‹å‹•ã§ docker-compose.yml ã‚’ç·¨é›†ã™ã‚‹
  ã¾ãŸã¯: .sandbox/scripts/sync-secrets.sh ã‚’å®Ÿè¡Œ
```

> ğŸ’¡ **ãƒã‚¤ãƒ³ãƒˆ:** èµ·å‹•æ™‚ã®æ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè¤‡æ•°ã®ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã€è¨­å®šæ¼ã‚Œã‚’æ¤œå‡ºã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€AI ãŒãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å‰ã«å•é¡Œã«æ°—ã¥ãã“ã¨ãŒã§ãã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—4: ç§˜åŒ¿æƒ…å ±ãŒè¦‹ãˆã¦ã—ã¾ã†ã“ã¨ã‚’ç¢ºèª

ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸçŠ¶æ…‹ã§ã€ç§˜åŒ¿ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```bash
# Config ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å†…å®¹ãŒè¦‹ãˆã‚‹
cat demo-apps-ios/SecureNote/Config/Debug.xcconfig

# Firebase è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚‚è¦‹ãˆã‚‹
cat demo-apps-ios/SecureNote/GoogleService-Info.plist
```

è¨­å®šæ¼ã‚Œã«ã‚ˆã‚Šã€æœ¬æ¥éš è”½ã™ã¹ããƒ•ã‚¡ã‚¤ãƒ«ãŒã‚³ãƒ³ãƒ†ãƒŠå†…ã«éœ²å‡ºã—ã€æ§‹é€ çš„ãªã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ãŒåŠ¹ã„ã¦ã„ãªã„çŠ¶æ…‹ã§ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—5: è¨­å®šã‚’å…ƒã«æˆ»ã™

ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤ã—ã€å†åº¦ãƒªãƒ“ãƒ«ãƒ‰ã—ã¦æ­£å¸¸ãªçŠ¶æ…‹ã«æˆ»ã—ã¦ãã ã•ã„ã€‚

> ğŸ“ **ã¾ã¨ã‚:** Docker ãƒã‚¦ãƒ³ãƒˆã«ã‚ˆã‚‹ç§˜åŒ¿è¨­å®šã¯ã€ä¸¡æ–¹ã® AI Sandbox ç’°å¢ƒï¼ˆDevContainer ã¨ CLI Sandboxï¼‰ã§åŒæœŸã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚è¨­å®šæ¼ã‚ŒãŒã‚ã‚‹ã¨èµ·å‹•æ™‚ã«æ¤œå‡ºã•ã‚Œã€è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

---

## æ–¹æ³•2: .claude/settings.json ã«ã‚ˆã‚‹åˆ¶é™ï¼ˆä¿é™º + Dockerãƒã‚¦ãƒ³ãƒˆã«ã‚ˆã‚‹ç§˜åŒ¿å¯¾è±¡ã®ææ¡ˆï¼‰

å„ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `.claude/settings.json` ã«ãƒ–ãƒ­ãƒƒã‚¯å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹å ´åˆã€2ã¤ã®åŠ¹æœãŒã‚ã‚Šã¾ã™ï¼š

  1. **ä¿é™º**
    - Claude Code ãŒãã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ãªããªã‚‹ï¼ˆDocker ãƒã‚¦ãƒ³ãƒˆã®è¨­å®šæ¼ã‚ŒãŒã‚ã£ã¦ã‚‚ä¿è­·ã•ã‚Œã‚‹ï¼‰
  2. **Dockerãƒã‚¦ãƒ³ãƒˆã«ã‚ˆã‚‹ç§˜åŒ¿å¯¾è±¡ã®ææ¡ˆ**
    - `sync-secrets.sh` ãŒã“ã®å®šç¾©ã‚’èª­ã¿å–ã‚Šã€Docker ãƒã‚¦ãƒ³ãƒˆè¨­å®šã¸ã®åæ˜ ã‚’ã‚¢ã‚·ã‚¹ãƒˆã§ãã‚‹

ã¤ã¾ã‚Š `.claude/settings.json` ãŒç§˜åŒ¿å¯¾è±¡ã®å®šç¾©å…ƒï¼ˆçœŸã®ã‚½ãƒ¼ã‚¹ï¼‰ã§ã€Docker ãƒã‚¦ãƒ³ãƒˆã¯ãã“ã‹ã‚‰æ´¾ç”Ÿã—ã¾ã™ã€‚

```bash
# ä¾‹: Secrets.swift ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å­˜åœ¨ã™ã‚‹ãŒ...
ls demo-apps-ios/SecureNote/Secrets.swift

# Claude Code ã¯èª­ã‚ãªã„ï¼ˆæ¨©é™ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ï¼‰
```

### Docker ãƒã‚¦ãƒ³ãƒˆã¸ã®åŒæœŸ

`.claude/settings.json` ã®å®šç¾©ã‚’ Docker ãƒã‚¦ãƒ³ãƒˆã«ã‚‚åæ˜ ã™ã‚‹ã«ã¯ï¼š

```bash
# å¯¾è©±çš„ã«åŒæœŸï¼ˆè¿½åŠ ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠå¯èƒ½ï¼‰
.sandbox/scripts/sync-secrets.sh

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³:
#   1) ã™ã¹ã¦è¿½åŠ 
#   2) å€‹åˆ¥ç¢ºèª
#   3) è¿½åŠ ã—ãªã„
#   4) ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºï¼ˆãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼‰â† è¨­å®šå†…å®¹ã‚’ç¢ºèªã§ãã‚‹
```

> ğŸ’¡ **ãŠã™ã™ã‚:** ã‚ªãƒ—ã‚·ãƒ§ãƒ³ `4` ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ã€`2`ã§å¿…è¦ãªã‚‚ã®ã ã‘è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚

### ãƒãƒ¼ã‚¸ã®ä»•çµ„ã¿

```
demo-apps-ios/.claude/settings.json  â”€â”
demo-apps/.claude/settings.json      â”€â”¼â”€â†’ /workspace/.claude/settings.json
(ä»–ã®ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ)               â”€â”˜     ï¼ˆãƒãƒ¼ã‚¸çµæœï¼‰
```

- **ãƒãƒ¼ã‚¸å…ƒ**: å„ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `.claude/settings.json`ï¼ˆãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆæ¸ˆã¿ï¼‰
- **ãƒãƒ¼ã‚¸çµæœ**: `/workspace/.claude/settings.json`ï¼ˆãƒªãƒã‚¸ãƒˆãƒªã«ã¯ç„¡ã„ï¼‰
- **ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: AI Sandbox èµ·å‹•æ™‚ã«è‡ªå‹•å®Ÿè¡Œ

**ãƒãƒ¼ã‚¸ã®æ¡ä»¶:**

| çŠ¶æ…‹ | å‹•ä½œ |
|------|------|
| `/workspace/.claude/settings.json` ãŒå­˜åœ¨ã—ãªã„ | ãƒãƒ¼ã‚¸ã—ã¦ä½œæˆ |
| å­˜åœ¨ã™ã‚‹ãŒæ‰‹å‹•å¤‰æ›´ãªã— | å†ãƒãƒ¼ã‚¸ |
| **å­˜åœ¨ã—ã¦æ‰‹å‹•å¤‰æ›´ã‚ã‚Š** | ãƒãƒ¼ã‚¸ã›ãšæ‰‹å‹•å¤‰æ›´ã‚’ä¿è­· |

> ğŸ’¡ æ‰‹å‹•ã§ `/workspace/.claude/settings.json` ã‚’ç·¨é›†ã—ãŸå ´åˆã€æ¬¡å›èµ·å‹•æ™‚ã«ä¸Šæ›¸ãã•ã‚Œã¾ã›ã‚“ã€‚å…ƒã«æˆ»ã™ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚

```bash
# ãƒãƒ¼ã‚¸å…ƒã‚’ç¢ºèªï¼ˆãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚‹ï¼‰
cat demo-apps-ios/.claude/settings.json

# ãƒãƒ¼ã‚¸çµæœã‚’ç¢ºèªï¼ˆAI Sandbox èµ·å‹•æ™‚ã«ä½œæˆã•ã‚ŒãŸï¼‰
cat /workspace/.claude/settings.json
```

> ğŸ“ ãƒãƒ¼ã‚¸ã¯ `.sandbox/scripts/merge-claude-settings.sh` ã§è¡Œã‚ã‚Œã¾ã™ã€‚
